if(!jQuery.support.cors&&jQuery.ajaxTransport&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i,getOrPostRegEx=/^get|post$/i,sameSchemeRegEx=new RegExp("^"+location.protocol,"i"),htmlRegEx=/text\/html/i,jsonRegEx=/\/json/i,xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(a,b){if(a.crossDomain&&a.async&&getOrPostRegEx.test(a.type)&&httpRegEx.test(a.url)&&sameSchemeRegEx.test(a.url)){var c=null,d=(b.dataType||"").toLowerCase();return{send:function(e,f){c=new XDomainRequest,/^\d+$/.test(b.timeout)&&(c.timeout=b.timeout),c.ontimeout=function(){f(500,"timeout")},c.onload=function(){var a="Content-Length: "+c.responseText.length+"\r\nContent-Type: "+c.contentType,b={code:200,message:"success"},e={text:c.responseText};try{if("html"===d||htmlRegEx.test(c.contentType))e.html=c.responseText;else if("json"===d||"text"!==d&&jsonRegEx.test(c.contentType))try{e.json=jQuery.parseJSON(c.responseText)}catch(g){b.code=500,b.message="parseerror"}else if("xml"===d||"text"!==d&&xmlRegEx.test(c.contentType)){var h=new ActiveXObject("Microsoft.XMLDOM");h.async=!1;try{h.loadXML(c.responseText)}catch(g){h=void 0}if(!h||!h.documentElement||h.getElementsByTagName("parsererror").length)throw b.code=500,b.message="parseerror","Invalid XML: "+c.responseText;e.xml=h}}catch(i){throw i}finally{f(b.code,b.message,e,a)}},c.onprogress=function(){},c.onerror=function(){f(500,"error",{text:c.responseText})};var g="";b.data&&(g="string"===jQuery.type(b.data)?b.data:jQuery.param(b.data)),c.open(a.type,a.url),c.send(g)},abort:function(){c&&c.abort()}}}})}!function(a,b,c){"use strict";var d=function(){};d.prototype.dismiss=function(c){c.preventDefault();var d=a(this).parent(),e=d.attr("id").split("-")[3],f=JSON.parse(b.localStorage.getItem("sorry_dismissed_status_ids"))||[];f.push(e),b.localStorage.setItem("sorry_dismissed_status_ids",JSON.stringify(f)),d.remove()};var e=function(c,d){var e=this;if(e.elem=d,e.$elem=a(d),"undefined"==typeof c.sorrySubdomain)throw new Error("You must set a data attribute on the body tag for sorry-subdomain which contains the subdomain of your Sorry status page.");if("undefined"==typeof Storage)throw new Error("Local storage is not supported or enabled in the browser, Status Bar cannot run.");e.endpoint="//api.sorryapp.com/1/pages/"+c.sorrySubdomain+"/apologies/current",e.template='<div class="sorry-status-bar" id="sorry-status-bar-{{id}}"><button type="button" class="sorry-status-bar-close" data-dismiss="status-notice" aria-hidden="true">&times;</button><span class="sorry-status-bar-text">{{apology}}</span> <a href="{{link}}" target="_blank" class="sorry-status-bar-link">{{link}}</a></div>',e.frag="",e.dismissed=JSON.parse(b.localStorage.getItem("sorry_dismissed_status_ids"))||[],e.loadcss(),e.run()};e.prototype.loadcss=function(){var b=this;a("<link/>",{rel:"stylesheet",type:"text/css",href:b.getpath()+"status-bar.min.css"}).appendTo("head")},e.prototype.fetch=function(){var b=this;return a.ajax({type:"GET",crossDomain:!0,dataType:"json",url:b.endpoint})},e.prototype.buildFrag=function(b){var c=this;a.each(b,function(b,d){a.inArray(String(d.id),c.dismissed)<0&&(c.frag+=c.template.replace(/{{apology}}/gi,d.description).replace(/{{link}}/gi,d.link).replace(/{{id}}/gi,d.id))})},e.prototype.display=function(){var a=this;a.$elem.prepend(a.frag)},e.prototype.run=function(){var a=this;a.fetch().done(function(b){a.buildFrag(b.response),a.display()})},e.prototype.getpath=function(){var b=a("script");return b[b.length-1].src.split("?")[0].split("/").slice(0,-1).join("/")+"/"};var f=a.fn.statusBar;a.fn.statusBar=function(b){return this.each(function(){var c=new e(b,this);a.data(this,"statusBar",c)})},a.fn.statusBar.noConflict=function(){return a.fn.statusBar=f,this},a(b).on("load",function(){a("[data-sorry-subdomain]").each(function(){var b=a(this);b.statusBar(b.data())})}),a(c).on("click.statusBar.data-api",'[data-dismiss="status-notice"]',d.prototype.dismiss)}(jQuery,window,document);