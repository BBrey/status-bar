$(document).ready(function(){if(!$("body").attr("data-sorry-announcement"))throw new Error("You must set a data attribute on the body tag for sorry-announcement which contains the ID of your Sorry status page.");if("undefined"==typeof Storage)throw new Error("Local storage is not supported or enabled in the browser, Sorry Announcer cannot run.");var a=$("body").data("sorry-announcement"),b=JSON.parse(window.localStorage.getItem("sorry_dismissed_status_ids"))||[],c='<div class="sorry-announcement"><button type="button" class="sorry-announcement-close" aria-hidden="true">&times;</button><span class="sorry-announcement-text"></span> <a target="_blank" class="sorry-announcement-link"></a></div>';$.ajax({type:"GET",crossDomain:!0,dataType:"json",url:"http://api.sorryapp.com/1/pages/"+a+"/apologies/current",success:function(a){$.each(a.response,function(a,d){if($.inArray(String(d.id),b)<0){var e=$(c);e.attr("id","sorry-announcement-"+d.id),e.find(".sorry-announcement-text").text(d.description),e.find(".sorry-announcement-link").attr("href",d.link).text(d.link),$("body").prepend(e)}})}}),$("body").on("click",".sorry-announcement-close",function(){var a=$(this).parent(),c=a.attr("id").split("-")[2];b.push(c),window.localStorage.setItem("sorry_dismissed_status_ids",JSON.stringify(b)),a.remove()})});